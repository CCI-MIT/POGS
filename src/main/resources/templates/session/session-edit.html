<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layouts/admin-layout.html}">
<!--/*@thymesVar id="_csrf" type="org.springframework.security.web.csrf.CsrfToken"*/-->
 
<head>
    <meta charset="UTF-8">
    <title>POGS - Sessions</title>
</head>
<body>
<div layout:fragment="content" class="container">
    <ol class="breadcrumb">
        <li class="breadcrumb-item"><a href="/admin">Home</a></li>
        <li class="breadcrumb-item "><a href="/admin/studies">Studies</a></li>
        <li class="breadcrumb-item active" th:if="${study.id != null}">
            <a th:href="${'/admin/studies/' + study.id}" th:text="${study.studyName}"></a>
        </li>
        <li class="breadcrumb-item active" th:if="${sessionBean.id != null}">
            <a th:href="${'/admin/sessions/' + sessionBean.id}" th:text="${sessionBean.sessionSuffix}"></a>
        </li>
    </ol>
    <h2>Edit session</h2>
    <form action="#" th:action="@{/admin/sessions}" th:object="${sessionBean}" method="post">
        <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}"/>
        <input type="hidden" th:field="*{id}"/>
        <input type="hidden" th:field="*{studyId}"/>
        <fieldset class="form-group row">
            <legend class="col-form-legend col-sm-2">Basic</legend>
            <div class="container">
                <fieldset class="form-group row">
                    <legend class="col-form-legend col-sm-2">Session config</legend>
                    <div class="container">
                        <div class="row">
                            <div class="col">
                                <div class="form-group row">
                                    <label class="col-sm-3 col-form-label" for="conditionId">Condition Id:</label>
                                    <div class="col-sm-9">
                                        <input class="form-control" type="text" id="conditionId" th:field="*{conditionId}"/>
                                    </div>
                                </div>
                                <div class="form-group row">
                                    <label class="col-sm-3 col-form-label" for="sessionStartDate">Session Start Date:</label>

                                    <div class="col-sm-9">
                                        <div class="form-group">
                                            <div class="input-group date" id="x" data-target-input="nearest">
                                                <input type="text" class="form-control" data-target="#sessionStartDate1" id="sessionStartDate" th:field="*{sessionStartDate}"/>
                                                <div class="input-group-append" data-target="#sessionStartDate1" data-toggle="sessionStartDate">
                                                    <div class="input-group-text"><i class="fa fa-calendar"><!-- --></i></div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <script type="text/javascript">
                                        $(function () {
                                            jQuery.datetimepicker.setLocale('en');
                                            jQuery('#sessionStartDate').datetimepicker(
                                                {
                                                    step:5,
                                                    format:'m/d/Y H:i'});
                                        });
                                    </script>


                                </div>
                            </div>
                            <div class="col">
                                <div class="form-group row">
                                    <label class="col-sm-3 col-form-label" for="status">Status:</label>
                                    <div class="col-sm-9">
                                        <select class="custom-select" th:field="*{status}" id="status">
                                            <option
                                                    th:each="rg: ${sessionStatuses}"
                                                    th:value="${rg.id}"
                                                    th:text="${rg.status}" ></option>
                                        </select>
                                    </div>
                                </div>

                                <div class="form-group row">
                                    <label class="col-sm-3 col-form-label" for="sessionSuffix">Session Suffix:</label>

                                    <div class="input-group col-sm-9">
                                        <div class="input-group-prepend">
                                            <span class="input-group-text" id="sessionSuffix3" th:text="${study.studySessionPrefix}"></span>
                                        </div>
                                        <input type="text" class="form-control" id="sessionSuffix" aria-describedby="sessionSuffix3" th:field="*{sessionSuffix}"/>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </fieldset>
            </div>
            <div class="container">
                <fieldset class="form-group row">

                    <legend class="col-form-legend col-sm-2">Rounds</legend>

                    <div class="container">
                        <div class="form-group row" >
                            <label class="col-sm-3 col-form-label" for="roundsEnabled">Enable rounds:</label>
                            <div class="col-sm-9">
                                <input class="form-check-input" th:field="*{roundsEnabled}" type="checkbox" id="roundsEnabled" />
                            </div>
                        </div>
                        <div class="form-group row" >
                            <label class="col-sm-3 col-form-label" for="numberOfRounds">Number Of Rounds:</label>
                            <div class="col-sm-9">
                                <input class="form-control" type="number" id="numberOfRounds" th:field="*{numberOfRounds}"/>
                            </div>
                        </div>
                    </div>
                </fieldset>
            </div>
            <div class="container">
                <fieldset class="form-group row">
                    <legend class="col-form-legend col-sm-2">Pages</legend>
                    <div class="container">
                        <fieldset class="form-group row">
                            <legend class="col-form-legend col-sm-2">Intro</legend>
                            <div class="container">
                                <div class="form-group row">
                                    <label class="col-sm-3 col-form-label" for="introPageEnabled">Intro Page Enabled:</label>
                                    <div class="col-sm-9">
                                        <input class="form-check-input" th:field="*{introPageEnabled}" type="checkbox" id="introPageEnabled" />
                                    </div>
                                </div>

                                <div class="form-group row">
                                    <label class="col-sm-3 col-form-label" for="introText">Intro Text:</label>
                                    <div class="col-sm-9">
                                        <textarea class="form-control htmleditor" id="introText" th:field="*{introText}" rows="3"></textarea>
                                    </div>
                                </div>

                                <div class="form-group row">
                                    <label class="col-sm-3 col-form-label" for="introTime">Intro Time:</label>
                                    <div class="col-sm-9">
                                        <input class="form-control" type="number" id="introTime" th:field="*{introTime}"/>
                                        <small id="introTimeHelp" class="form-text text-muted">In seconds</small>
                                    </div>
                                </div>

                                <div class="form-group row">
                                    <label class="col-sm-3 col-form-label" for="rosterPageEnabled">Roster Page Enabled:</label>
                                    <div class="col-sm-9">
                                        <input class="form-check-input" th:field="*{rosterPageEnabled}" type="checkbox" id="rosterPageEnabled" />
                                    </div>
                                </div>

                                <div class="form-group row">
                                    <label class="col-sm-3 col-form-label" for="rosterTime">Roster Time:</label>
                                    <div class="col-sm-9">
                                        <input class="form-control" type="number" id="rosterTime" th:field="*{rosterTime}"/>
                                        <small id="rosterTimeHelp" class="form-text text-muted">In seconds</small>
                                    </div>
                                </div>
                                <div class="form-group row">
                                    <label class="col-sm-3 col-form-label" for="waitingRoomTime">Waiting Room Time:</label>
                                    <div class="col-sm-9">
                                        <input class="form-control" type="number" id="waitingRoomTime" th:field="*{waitingRoomTime}"/>
                                        <small id="waitingRoomTimeHelp" class="form-text text-muted">In seconds</small>
                                    </div>
                                </div>

                                <div class="form-group row">
                                    <label class="col-sm-3 col-form-label" for="displayNameChangePageEnabled">Display Name Change Page Enabled:</label>
                                    <div class="col-sm-9">
                                        <input class="form-check-input" value="false" th:field="*{displayNameChangePageEnabled}" type="checkbox" id="displayNameChangePageEnabled" />
                                    </div>
                                </div>

                                <div class="form-group row">
                                    <label class="col-sm-3 col-form-label" for="displayNameChangeTime">Display Name Change Time:</label>
                                    <div class="col-sm-9">
                                        <input class="form-control" type="number" id="displayNameChangeTime" th:field="*{displayNameChangeTime}"/>
                                        <small id="displayNameChangeTimeHelp" class="form-text text-muted">In seconds</small>
                                    </div>
                                </div>
                            </div>
                        </fieldset>
                    </div>
                    <div class="container">
                        <fieldset class="form-group row">
                            <legend class="col-form-legend col-sm-2">Done</legend>
                            <div class="container">
                                <div class="form-group row">
                                    <label class="col-sm-3 col-form-label" for="donePageEnabled">Done Page Enabled:</label>
                                    <div class="col-sm-9">
                                        <input class="form-check-input" th:field="*{donePageEnabled}" type="checkbox" id="donePageEnabled" />
                                    </div>
                                </div>
                                <div class="form-group row">
                                    <label class="col-sm-3 col-form-label" for="donePageText">Done Page Text:</label>
                                    <div class="col-sm-9">
                                        <textarea class="form-control htmleditor" id="donePageText" th:field="*{donePageText}" rows="3"></textarea>
                                    </div>
                                </div>
                                <div class="form-group row">
                                    <label class="col-sm-3 col-form-label" for="doneRedirectUrl">Done Redirect Url:</label>
                                    <div class="col-sm-9">
                                        <input class="form-control" type="text" id="doneRedirectUrl" th:field="*{doneRedirectUrl}"/>
                                    </div>
                                </div>
                                <div class="form-group row">
                                    <label class="col-sm-3 col-form-label" for="donePageTime">Done Page Time:</label>
                                    <div class="col-sm-9">
                                        <input class="form-control" type="number" id="donePageTime" th:field="*{donePageTime}"/>
                                        <small id="donePageTimeHelp" class="form-text text-muted">In seconds</small>
                                    </div>
                                </div>
                            </div>
                        </fieldset>
                    </div>

                </fieldset>
            </div>
        </fieldset>
        <fieldset class="form-group row">
            <legend class="col-form-legend col-sm-8">Advanced - Tasks</legend>
            <div class="container">
                <div class="form-group row">
                    <label class="col-sm-3 col-form-label" for="taskExecutionType">Task Execution Type:</label>
                    <div class="col-sm-9">

                        <select class="custom-select" th:field="*{taskExecutionType}" id="taskExecutionType">
                            <option
                                    th:each="rg: ${taskExecutionTypes}"
                                    th:value="${rg.id}"
                                    th:text="${rg.taskExecutionType}" ></option>
                        </select>

                    </div>
                </div>
            </div>
        </fieldset>
        <fieldset class="form-group row">
            <legend class="col-form-legend col-sm-8">Advanced - Communication</legend>
            <div class="container">
                <div class="form-group row">
                    <label class="col-sm-3 col-form-label" for="chatBotName">Chat Bot Name:</label>
                    <div class="col-sm-9">
                        <input class="form-control" type="text" id="chatBotName" th:field="*{chatBotName}"/>
                    </div>
                </div>

                <div class="form-group row">
                    <label class="col-sm-3 col-form-label" for="communicationType">Communication Type:</label>
                    <div class="col-sm-9">

                        <select class="custom-select" th:field="*{communicationType}" id="communicationType">
                            <option
                                    th:each="rg: ${communicationConstraints}"
                                    th:value="${rg.id}"
                                    th:text="${rg.communicationType}" ></option>
                        </select>
                    </div>
                </div>
            </div>
        </fieldset>
        <fieldset class="form-group row">
            <legend class="col-form-legend col-sm-8">Advanced - Feedback</legend>
            <div class="container">
                <div class="form-group row">
                    <label class="col-sm-3 col-form-label" for="scoreboardEnabled">Scoreboard Enabled:</label>
                    <div class="col-sm-9">
                        <input class="form-check-input" th:field="*{scoreboardEnabled}" type="checkbox" id="scoreboardEnabled" />
                    </div>
                </div>
                <div class="form-group row">
                    <label class="col-sm-3 col-form-label" for="scoreboardDisplayType">Scoreboard Display Type:</label>
                    <div class="col-sm-9">

                        <select class="custom-select" th:field="*{scoreboardDisplayType}" id="scoreboardDisplayType">
                            <option
                                    th:each="rg: ${scoreboardDisplayTypes}"
                                    th:value="${rg.id}"
                                    th:text="${rg.scoreboardDisplayType}" ></option>
                        </select>

                    </div>
                </div>
                <div class="form-group row">
                    <label class="col-sm-3 col-form-label" for="scoreboardUseDisplayNames">Scoreboard Use Display Names:</label>
                    <div class="col-sm-9">
                        <input class="form-check-input" th:field="*{scoreboardUseDisplayNames}" type="checkbox" id="scoreboardUseDisplayNames" />
                    </div>
                </div>
            </div>
        </fieldset>
        <fieldset class="form-group row">
            <legend class="col-form-legend col-sm-8">Advanced - Collaboration tools</legend>
            <div class="container">
                <div class="form-group row">
                    <label class="col-sm-3 col-form-label" for="collaborationTodoListEnabled">Collaboration Todo List Enabled:</label>
                    <div class="col-sm-9">
                        <input class="form-check-input" th:field="*{collaborationTodoListEnabled}" type="checkbox" id="collaborationTodoListEnabled" />
                    </div>
                </div>
                <div class="form-group row">
                    <label class="col-sm-3 col-form-label" for="collaborationFeedbackWidgetEnabled">Collaboration Feedback Widget Enabled:</label>
                    <div class="col-sm-9">
                        <input class="form-check-input" th:field="*{collaborationFeedbackWidgetEnabled}" type="checkbox" id="collaborationFeedbackWidgetEnabled" />
                    </div>
                </div>
                <div class="form-group row">
                    <label class="col-sm-3 col-form-label" for="collaborationVotingWidgetEnabled">Collaboration Voting Widget Enabled:</label>
                    <div class="col-sm-9">
                        <input class="form-check-input" th:field="*{collaborationVotingWidgetEnabled}" type="checkbox" id="collaborationVotingWidgetEnabled" />
                    </div>
                </div>
            </div>
        </fieldset>
        <fieldset class="form-group row">
            <legend class="col-form-legend col-sm-8">Advanced - Team composition</legend>
            <div class="container">
                <div class="form-group row">
                    <label class="col-sm-3 col-form-label" for="teamCreationMethod">Team Creation Method:</label>
                    <div class="col-sm-9">


                        <select class="custom-select" th:field="*{teamCreationMethod}" id="teamCreationMethod">
                            <option
                                    th:each="rg: ${teamCreationMethods}"
                                    th:value="${rg.id}"
                                    th:text="${rg.teamCreationMethod}" ></option>
                        </select>

                    </div>
                </div>
                <div class="form-group row">
                    <label class="col-sm-3 col-form-label" for="teamCreationType">Team Membership Type:</label>
                    <div class="col-sm-9">

                        <select class="custom-select" th:field="*{teamCreationType}" id="teamCreationType">
                            <option
                                    th:each="rg: ${teamCreationTypes}"
                                    th:value="${rg.id}"
                                    th:text="${rg.teamCreationType}" ></option>
                        </select>


                    </div>
                </div>
                <div class="form-group row">
                    <label class="col-sm-3 col-form-label" for="teamCreationMoment">Team Creation Moment:</label>
                    <div class="col-sm-9">
                        <select class="custom-select" th:field="*{teamCreationMoment}" id="teamCreationMoment">
                            <option
                                    th:each="rg: ${teamCreationTimes}"
                                    th:value="${rg.id}"
                                    th:text="${rg.teamCreationTime}" ></option>
                        </select>

                    </div>
                </div>

                <div class="form-group row">
                    <label class="col-sm-3 col-form-label" for="teamCreationMatrix">Team Creation Matrix:</label>
                    <div class="col-sm-9">
                        <textarea class="form-control htmleditor" id="teamCreationMatrix" th:field="*{teamCreationMatrix}" rows="3"></textarea>
                    </div>
                </div>

                <div class="form-group row">
                    <label class="col-sm-3 col-form-label" for="teamMinSize">Team size:</label>
                    <div class="col-sm-9">
                        <input class="form-control" type="number" id="teamMinSize" th:field="*{teamMinSize}"/>
                    </div>
                </div>

                <div class="form-group row">
                    <label class="col-sm-3 col-form-label" for="couldNotAssignToTeamMessage">Could Not Assign To Team Message:</label>
                    <div class="col-sm-9">
                        <input class="form-control" type="text" id="couldNotAssignToTeamMessage" th:field="*{couldNotAssignToTeamMessage}"/>
                    </div>
                </div>


            </div>

        </fieldset>

        <!-- Begin research group field -->
        <fieldset class="form-group">
            <legend>Task groups</legend>

            <select multiple="multiple" size="10" th:field="*{sessionHasTaskGroupRelationshipBean.selectedValues}" id="taskGroups">
                <option
                        th:each="rg: ${taskGroups}"
                        th:value="${rg.id}"
                        th:text="${rg.taskGroupName}" ></option>
            </select>
        </fieldset>
        <script>

            $(function() {
                //$('select[name="researchgroups"]')

                $(".htmleditor").summernote(
                    {
                    height: 200,
                    toolbar: [
                        // [groupName, [list of button]]
                        ['para', ['style','ul', 'ol', 'paragraph']],
                        ['style', ['bold', 'italic', 'underline', 'clear']],
                        ['font', ['strikethrough', 'superscript', 'subscript']],
                        ['fontsize', ['fontsize']],
                        ['color', ['color']],
                        ['insert', ['picture','link','video','table','codeview']]
                      ]
                    }
                );
                $('#taskGroups')
                    .bootstrapDualListbox({
                                              selectedListLabel:"Chosen groups",
                                              nonSelectedListLabel: "Available groups",
                                              moveAllLabel:"Move all",
                                              removeAllLabel: "Remove all"
                                          });
                /* hack for bootstrap 4 */
                var dualListContainer = $('#researchGroups').bootstrapDualListbox('getContainer');
                dualListContainer.find('.moveall i').removeClass().addClass('fa fa-arrow-right');
                dualListContainer.find('.removeall i').removeClass().addClass('fa fa-arrow-left');
                dualListContainer.find('.move i').removeClass().addClass('fa fa-arrow-right');
                dualListContainer.find('.remove i').removeClass().addClass('fa fa-arrow-left');
            });
        </script>
        <!-- End research group field -->





        <!--<div class="form-group row">-->
            <!--<label class="col-sm-2 col-form-label" for="subjectCommunicationId">Subject Communication Id:</label>-->
            <!--<div class="col-sm-10">-->
                <!--<input class="form-control" type="text" id="subjectCommunicationId" th:field="*{subjectCommunicationId}"/>-->
            <!--</div>-->
        <!--</div>-->

        <a class="btn btn-danger btn-primary" th:href="${'/admin/studies/' + study.id + '/sessions/'+ sessionBean.id}">Cancel</a>

        <button th:if="${sessionBean.id == null}" type="submit" class="btn btn-primary">Create session
        </button>
        <button th:if="${sessionBean.id != null}" type="submit" class="btn btn-primary">Save session
        </button>
        <br/>
    </form>
</div>
 
</div>
</body>
</html>
